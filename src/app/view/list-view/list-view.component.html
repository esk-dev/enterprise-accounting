<section class="list">
  <div class="add-item">
    <a *appRole [routerLink]="['/create/main-enterprise']" mat-flat-button color="primary"
      >Добавить организацию<mat-icon mat-list-icon>add</mat-icon></a
    >
  </div>
  <ng-container *ngIf="enterprises$ | async as data">
    <ng-container *ngFor="let row of data">
      <h3>Главная Организация</h3>
      <div class="list-header">
        <span class="column">Полное наименование организации</span>
        <span class="column">Краткое наименование организации</span>
        <span class="column">ИНН</span>
        <span class="column">КПП</span>
        <span class="column">Учредитель</span>
        <span class="column">Адрес</span>
        <span class="column">Номер телефона</span>
        <span *appRole class="spacer column"></span>
      </div>
      <div class="list-item-row">
        <span class="column">{{ row.mainEnterprise.fullName }}</span>
        <span class="column">{{ row.mainEnterprise.shortName }}</span>
        <span class="column">{{ row.mainEnterprise.INN }}</span>
        <span class="column">{{ row.mainEnterprise.KPP }}</span>
        <span class="column">{{ row.mainEnterprise.founder }}</span>
        <span class="column">{{ row.mainEnterprise.addres }}</span>
        <span class="column">{{ row.mainEnterprise.phone }}</span>
        <div class="column row-action">
          <a
            *appRole
            [routerLink]="['/edit/main-enterprise', row.mainEnterprise._id]"
            mat-icon-button
            class="column row-action"
            color="primary"
            ><mat-icon mat-list-icon>mode_edit</mat-icon></a
          >
        </div>
      </div>
      <h3>Филиалы</h3>
      <div class="add-item">
        <a
          *appRole
          [routerLink]="['/create/sub-enterprise', row.mainEnterprise._id]"
          mat-flat-button
          color="primary"
          >Добавить <mat-icon mat-list-icon>add</mat-icon></a
        >
      </div>
      <ng-container *ngIf="row.subEnterprises">
        <div class="sub-row">
          <div class="list-header">
            <span class="column">Адрес офиса</span>
            <span class="column">Номер телефона</span>
            <span class="column">Представитель</span>
            <span *appRole class="spacer column"></span>
          </div>
          <ng-container *ngFor="let subRow of row.subEnterprises">
            <div class="list-item-row">
              <span class="column">{{ subRow.officeAdress }}</span>
              <span class="column">{{ subRow.phone }}</span>
              <span class="column">{{ subRow.official }}</span>
              <div class="column row-action">
                <a
                  *appRole
                  [routerLink]="['/edit/sub-enterprise', subRow._id]"
                  mat-icon-button
                  color="primary"
                  ><mat-icon mat-list-icon>mode_edit</mat-icon></a
                >
              </div>
            </div>
          </ng-container>
        </div>
      </ng-container>
    </ng-container>
  </ng-container>
</section>
