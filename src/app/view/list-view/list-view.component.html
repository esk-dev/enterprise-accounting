<section class="list_container">
  <div class="action">
    <a *appRole [routerLink]="['/create/main-enterprise']" mat-flat-button color="primary"
      >Добавить организацию<mat-icon mat-list-icon>add</mat-icon></a
    >
  </div>
  <ng-container *ngIf="enterprises$ | async as data">
    <ng-container *ngFor="let row of data">
      <h1>{{row.mainEnterprise.fullName}}</h1>
      <div class="list-line">
        <div class="list-line_column">
          <mat-card-subtitle>Полное наименование организации: </mat-card-subtitle>
          <mat-card-subtitle>{{ row.mainEnterprise.fullName }}</mat-card-subtitle>
        </div>
        <div class="list-line_column">
          <mat-card-subtitle>Краткое наименование организаци: </mat-card-subtitle
          ><mat-card-subtitle>{{ row.mainEnterprise.shortName }}</mat-card-subtitle>
        </div>
        <div class="list-line_column">
          <mat-card-subtitle>ИНН: </mat-card-subtitle>
          <mat-card-subtitle> {{ row.mainEnterprise.INN }}</mat-card-subtitle>
        </div>
        <div class="list-line_column">
          <mat-card-subtitle>КПП: </mat-card-subtitle>
          <mat-card-subtitle> {{ row.mainEnterprise.KPP }}</mat-card-subtitle>
        </div>
        <div class="list-line_column">
          <mat-card-subtitle>Учредитель: </mat-card-subtitle
          ><mat-card-subtitle> {{ row.mainEnterprise.founder }}</mat-card-subtitle>
        </div>
        <div class="list-line_column">
          <mat-card-subtitle>Адрес: </mat-card-subtitle>
          <mat-card-subtitle>
            {{ row.mainEnterprise.addres }}
          </mat-card-subtitle>
        </div>
        <div class="list-line_column">
          <mat-card-subtitle>Номер телефона:</mat-card-subtitle>
          <mat-card-subtitle> {{ row.mainEnterprise.phone }}</mat-card-subtitle>
        </div>
        <div class="list-line_icon">
          <a
            *appRole
            [routerLink]="['/edit/main-enterprise', row.mainEnterprise._id]"
            mat-icon-button
            color="primary"
            ><mat-icon mat-list-icon>mode_edit</mat-icon></a
          >
        </div>
      </div>
      <mat-divider></mat-divider>
      <div class="list-sub-lines_container">
        <h1>Филиалы</h1>
        <ng-container *ngIf="row.subEnterprises">
          <ng-container *ngFor="let subRow of row.subEnterprises">
            <div class="list-line">
              <div class="list-line_column">
                <mat-card-subtitle> Должностное лицо: </mat-card-subtitle>
                <mat-card-subtitle>
                  {{ subRow.official }}
                </mat-card-subtitle>
              </div>
              <div class="list-line_column">
                <mat-card-subtitle>Адрес офиса: </mat-card-subtitle
                ><mat-card-subtitle>
                  {{ subRow.officeAdress }}
                </mat-card-subtitle>
              </div>
              <div class="list-line_column">
                <mat-card-subtitle>Номер телефона: </mat-card-subtitle>
                <mat-card-subtitle>
                  {{ subRow.phone }}
                </mat-card-subtitle>
              </div>
              <div  class="list-line_icon action">
                <a
                  *appRole
                  [routerLink]="['/edit/sub-enterprise', subRow._id]"
                  mat-icon-button
                  color="primary"
                  ><mat-icon mat-list-icon>mode_edit</mat-icon></a
                >
              </div>
            </div>
            <mat-divider></mat-divider>
          </ng-container>
        </ng-container>
        <div class="action">
          <a
            *appRole
            [routerLink]="['/create/sub-enterprise', row.mainEnterprise._id]"
            mat-flat-button
            color="primary"
            >Добавить филиал<mat-icon mat-list-icon>add</mat-icon></a
          >
        </div>
      </div>
    </ng-container>
  </ng-container>
</section>
